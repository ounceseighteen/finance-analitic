<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£—á—ë—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <h1>üí∞ –£—á—ë—Ç —Ñ–∏–Ω–∞–Ω—Å–æ–≤</h1>

        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è (–∫–∞–∫ —É –≤–∞—Å) -->
        <div class="nav-links">
            <a href="{{ url_for('index') }}" class="active">–ì–ª–∞–≤–Ω–∞—è</a>
            <a href="{{ url_for('add_transaction') }}">–î–æ–±–∞–≤–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é</a>
            <a href="{{ url_for('history') }}">–ò—Å—Ç–æ—Ä–∏—è</a>
            <a href="{{ url_for('import_export') }}">–ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç</a>
            <span style="margin-left: auto; color: #333;">
                –ü—Ä–∏–≤–µ—Ç, {{ session.username }}!
            </span>
            <a href="{{ url_for('logout') }}" style="color: #dc3545;">–í—ã–π—Ç–∏</a>
        </div>

        <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –±–∞–ª–∞–Ω—Å–∞ -->
        <div class="balance-cards">
            <div class="card balance-card">
                <h3>–ë–∞–ª–∞–Ω—Å</h3>
                <div class="amount {% if balance >= 0 %}positive{% else %}negative{% endif %}">
                    {{ "%.2f"|format(balance) }} ‚ÇΩ
                </div>
            </div>

            <div class="card income-card">
                <h3>–î–æ—Ö–æ–¥—ã</h3>
                <div class="amount positive">+{{ "%.2f"|format(income) }} ‚ÇΩ</div>
            </div>

            <div class="card expense-card">
                <h3>–†–∞—Å—Ö–æ–¥—ã</h3>
                <div class="amount negative">-{{ "%.2f"|format(expense) }} ‚ÇΩ</div>
            </div>
        </div>

        <!-- –ü—Ä–æ—Å—Ç–æ–π –≥—Ä–∞—Ñ–∏–∫ -->
        <div class="card">
            <h3>–†–∞—Å—Ö–æ–¥—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º</h3>
            <div class="chart">
                {% for item in chart_data %}
                <div class="chart-item">
                    <div class="category">{{ item.category }}</div>
                    <div class="bar-container">
                        <div class="bar" style="width: {{ (item.total / expense * 100) if expense > 0 else 0 }}%"></div>
                    </div>
                    <div class="amount">{{ "%.2f"|format(item.total) }} ‚ÇΩ</div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</body>
</html>
